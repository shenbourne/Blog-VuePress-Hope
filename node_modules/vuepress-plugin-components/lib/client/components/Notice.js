import{startsWith as l,isLinkAbsolute as h,isLinkHttp as v}from"@vuepress/helper/client";import{defineComponent as y,ref as g,computed as p,onMounted as k,h as e,TransitionGroup as S}from"vue";import{usePageData as w}from"vuepress/client";import{useRoute as C,useRouter as L}from"vue-router";import{C as x}from"../icons-zhLaO7d8.js";import"../styles/notice.scss";import"vuepress-shared/client";var H=y({name:"NoticeItem",props:{path:{type:String,default:""},match:{type:String,default:""},title:{type:String,required:!0},content:{type:String,required:!0},actions:{type:Array,default:()=>[]},noticeKey:{type:String,default:""},showOnce:Boolean,confirm:Boolean,fullscreen:Boolean},setup(t){const i=C(),a=L(),n=g(!1),s=p(()=>t.noticeKey?`notice-${t.noticeKey}`:`${t.title}${t.content}`),u=p(()=>t.match?new RegExp(t.match).test(i.path):l(i.path,t.path));k(()=>{const o=(t.showOnce?localStorage:sessionStorage).getItem(s.value);n.value=!o});const r=()=>{n.value=!1,(t.showOnce?localStorage:sessionStorage).setItem(s.value,"true")},m=o=>{o&&(h(o)?a.push(o):v(o)&&window.open(o)),r()};return()=>e(S,{name:"notice-fade"},()=>u.value&&n.value?[t.fullscreen?e("div",{key:"mask",class:"vp-notice-mask",onClick:()=>{t.confirm||r()}}):null,e("div",{key:"popup",class:["vp-notice-wrapper",{fullscreen:t.fullscreen}]},[e("header",{class:"vp-notice-title"},[t.confirm?null:e(x,{onClick:()=>r()}),e("span",{innerHTML:t.title})]),e("div",{class:"vp-notice-content",innerHTML:t.content}),e("div",{class:"vp-notice-footer"},t.actions.map(({text:o,link:f,type:d=""})=>e("button",{type:"button",class:["vp-notice-footer-action",d],onClick:()=>m(f),innerHTML:o})))])]:[])}});const c=({config:t})=>{const i=w(),a=t.find(n=>"match"in n?new RegExp(n.match).test(i.value.path):l(i.value.path,n.path));return a?e(H,a):null};c.displayName="Notice",c.props={config:{type:Array,required:!0}};export{c as default};
//# sourceMappingURL=Notice.js.map
